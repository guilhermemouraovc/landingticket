<!-- Generated by SpecStory -->

<!-- cursor Session 9c71391f-913b-422d-a5fe-78c5d540e524 (2025-10-21 11:21Z) -->

# Como funciona a barra de pesquisa (2025-10-21 11:21Z)

_**User (2025-10-21 11:21Z)**_

me explique como funciona a barra de pesquisa do meu site

---

_**Assistant (gpt-5)**_

Vou analisar o arquivo `EventDetailPage.vue` para entender como funciona a barra de pesquisa do seu site.


---

Tool use: **read_file**

Read file: c:\Users\gmvc\OneDrive\√Årea de Trabalho\TicketPE\Landing\landingticket\landingticket-1\src\pages\EventDetailPage.vue

---

Analisando o arquivo `EventDetailPage.vue`, posso ver que este √© uma p√°gina de detalhes de evento espec√≠fico, mas **n√£o cont√©m uma barra de pesquisa**. Esta p√°gina √© focada em exibir informa√ß√µes detalhadas de um evento individual.

Para encontrar a barra de pesquisa do seu site, preciso procurar por outros arquivos que possam conter essa funcionalidade. Vou buscar por componentes relacionados √† pesquisa:


---

Tool use: **grep**

<details>
<summary>Grep for "search|pesquisa|busca" ‚Ä¢ 7 matches</summary>

Output mode: files_with_matches


| File |
|------|
| `.\src\composables\useSupabaseEvents.js` |
| `.\src\layouts\MainLayout.vue` |
| `.\src\components\RelatedEventsCarousel.vue` |
| `.\src\pages\ProgramacaoCompletaPage.vue` |
| `.\ACCESSIBILITY.md` |
| `.\src\pages\ErrorNotFound.vue` |
| `.\src\composables\useEvents.js` |


</details>

---

Tool use: **file_search**

<details>
            <summary>Searched codebase "search" ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

Tool use: **file_search**

<details>
            <summary>Searched codebase "home" ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

Vou tentar uma abordagem diferente para encontrar os arquivos do projeto:


---

Tool use: **list_dir**

<details>
            <summary>Listed directory undefined ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

Tool use: **list_dir**

<details>
            <summary>Listed directory undefined ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

Tool use: **list_dir**

<details>
            <summary>Listed directory undefined ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

Agora vou verificar a p√°gina principal (`IndexPage.vue`) que provavelmente cont√©m a barra de pesquisa:


---

Tool use: **read_file**

Read file: src/pages/IndexPage.vue

---

Agora vou verificar o layout principal para encontrar a barra de pesquisa:


---

Tool use: **list_dir**

<details>
            <summary>Listed directory undefined ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

Tool use: **read_file**

Read file: src/layouts/MainLayout.vue

---

Perfeito! Agora encontrei a barra de pesquisa do seu site. Vou explicar como ela funciona:

## Como Funciona a Barra de Pesquisa do Seu Site

A barra de pesquisa est√° localizada no **header** do site (`MainLayout.vue`) e funciona da seguinte forma:

### üìç **Localiza√ß√£o**
- **Arquivo**: `src/layouts/MainLayout.vue` (linhas 37-50)
- **Posi√ß√£o**: No header, ao lado do bot√£o "Filtros"
- **Visibilidade**: Apenas em telas desktop (`gt-sm` - maior que small)

### üîç **Funcionamento T√©cnico**

#### **1. Interface Visual**
```vue
<q-input
  class="search-pill q-my-xs"
  filled
  square-rounded
  bg-color="white"
  placeholder="Pesquisar eventos"
  v-model="search"
  aria-label="Campo de busca de eventos"
  role="searchbox"
>
  <template #append>
    <q-icon name="search" aria-hidden="true" />
  </template>
</q-input>
```

#### **2. L√≥gica de Busca (linhas 254-277)**
A pesquisa funciona com **debounce** (atraso) de 300ms:

```javascript
// Watch no campo de busca com debounce de 300ms
watch(search, (newValue) => {
  // Limpa o timer anterior
  if (debounceTimer) {
    clearTimeout(debounceTimer)
  }

  // Se o campo estiver vazio, n√£o faz nada
  if (!newValue || newValue.trim() === '') {
    return
  }

  // Cria novo timer de 300ms
  debounceTimer = setTimeout(() => {
    // Redireciona para a p√°gina de programa√ß√£o com query param
    router.push({
      path: '/programacao',
      query: {
        ...route.query,
        q: newValue.trim(),
      },
    })
  }, 300)
})
```

### ‚ö° **Fluxo de Funcionamento**

1. **Usu√°rio digita** na barra de pesquisa
2. **Sistema aguarda 300ms** (debounce) para evitar muitas requisi√ß√µes
3. **Se o campo n√£o estiver vazio**, redireciona para `/programacao`
4. **Adiciona o termo de busca** como par√¢metro `q` na URL
5. **Preserva outros filtros** que possam estar ativos

### üéØ **Caracter√≠sticas**

- **Debounce**: Evita requisi√ß√µes excessivas enquanto o usu√°rio digita
- **Redirecionamento**: Leva o usu√°rio para a p√°gina de programa√ß√£o completa
- **Preserva√ß√£o de filtros**: Mant√©m outros filtros ativos na URL
- **Acessibilidade**: Inclui `aria-label` e `role="searchbox"`
- **Design responsivo**: S√≥ aparece em telas desktop

### üì± **Comportamento Mobile**
Em dispositivos m√≥veis, a barra de pesquisa **n√£o aparece** no header. Os usu√°rios m√≥veis precisam usar os filtros de categoria ou navegar pelas p√°ginas espec√≠ficas.

### üîó **Integra√ß√£o**
A barra de pesquisa est√° integrada com:
- **Sistema de roteamento** do Vue Router
- **P√°gina de programa√ß√£o** (`/programacao`)
- **Sistema de filtros** existente
- **Estado global** da aplica√ß√£o

Esta √© uma implementa√ß√£o elegante que combina UX (debounce) com funcionalidade robusta (preserva√ß√£o de estado e redirecionamento inteligente).

---

